<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by perltidy on Thu Nov 30 18:10:54 2006 -->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>2006 Perl Advent Calendar: ...and a PARtridge in a PAR tree</title>
<link rel="stylesheet" href="../style.css" type="text/css" /></head>
<body>
<h1><a href="../">Perl Advent Calendar 2006-12</a>-22</h1>
<h2 align="center">&hellip;and a PARtridge in a PAR tree</h2>
<h3 align="center">by Jerrad Pierce</h3>

<p>When Mark Fowler first covered <tt><a href="../../2003/25/">PAR</a></tt> in
2003, useful though it may have been, it was still quite young and not much
more than a linker for modules and scripts. The accompanying <tt>pp</tt> (now
in <tt>PAR::Packer</tt>) also allowed for the linking of the perl binary, and
therefore the distribution of a program as a stand-alone executable. Since
then a little noticed<sup><a href="#1">1</a></sup> addition has matured.

<p>
<tt><A HREF="http://search.cpan.org/search?module=PAR::Dist">PAR::Dist</a></tt>
allows one to package modules&mdash;any random module, or multiple modules
together through <tt>merge_par</tt>&mdash;for redistribution and
<em>installation</em>. You can thusly use PARchives as an alternative to RPMs
(or whatever your distribution uses), ActiveState's PPMs, or a
<tt>Bundle::</tt>. Some of the benefits of such a scheme are the abilities to
compile and test only once for a given platform (potentially saving a lot of
time), and to install modules without network access.</p>

<p>An interesting extension to <tt>PAR::Dist</tt> is
<tt><A HREF="http://search.cpan.org/search?module=PAR::Dist::FromCPAN">PAR::Dist::FromCPAN</a></tt>.
Both are usable programatically, but the latter provides the convenient
<tt>cpan2par</tt> wrapper for use from the command line. The results of</p>

<pre>
$ cpan2par -P <a href="../../2005/13/">Regexp::Keep</a>
</pre>

<p>are lots of the usual <tt>CPAN</tt> install spew, some additional messages
from <tt>PAR::Dist::FromCPAN</tt> and finally
<a href="Regexp-Keep-0.02-i386-linux-thread-multi-5.8.0.par">the PARchive</a>.</p>

<pre>
$ unzip -t Regexp-Keep-0.02-i386-linux-thread-multi-5.8.0.par<span class="c">
Archive:  Regexp-Keep-0.02-i386-linux-thread-multi-5.8.0.par
    testing: lib/                     OK
    testing: lib/Regexp/              OK
    testing: lib/Regexp/.exists       OK
    testing: lib/Regexp/Keep.pm       OK
    testing: lib/auto/                OK
    testing: lib/auto/Regexp/         OK
    testing: lib/auto/Regexp/Keep/    OK
    testing: lib/auto/Regexp/Keep/.exists   OK
    testing: arch/                    OK
    testing: arch/auto/               OK
    testing: arch/auto/Regexp/        OK
    testing: arch/auto/Regexp/Keep/   OK
    testing: arch/auto/Regexp/Keep/.exists   OK
    testing: arch/auto/Regexp/Keep/Keep.so   OK
    testing: arch/auto/Regexp/Keep/Keep.bs   OK
    testing: man3/                    OK
    testing: man3/.exists             OK
    testing: man3/Regexp::Keep.3pm    OK
    testing: MANIFEST                 OK
    testing: META.yml                 OK
No errors detected in compressed data of Regexp-Keep-0.02-i386-linux-thread-multi-5.8.0.par.</span></pre>

<p>
(Un)fortunately, <tt>PAR::Dist::install_par</tt> does not seem to check that
the archive platform/perl version matches/is appropriate for the target system.
On the one hand, this means you can install PARchives containing XS modules on
sufficiently similar setups without a hitch. On the other hand, it gives you
enough rope to yank out your tooth. I was able to <tt>install_par</tt> the
PARchive above on a Solaris box, though clearly not use it.</p>

<blockquote style="padding: 1em; border: 2px ridge black; background-color:#eee">
Note: If you happen to encounter the PARchive build error with v.04:
<pre><span class="c">No such file or directory at &hellip;/PAR/Dist.pm line 249</span></pre>

All may not be lost, see <a href="http://rt.cpan.org//Ticket/Display.html?id=24057">this RT ticket</a>.
</blockquote>

<h2>SEE ALSO</h2>
<tt><A HREF="http://search.cpan.org/search?module=Apache::PAR">Apache::PAR</a></tt>,
<tt><A HREF="http://search.cpan.org/search?module=PAR::Dist::InstallPPD">PAR::Dist::InstallPPD</a></tt>


<h2>FOOTNOTES</h2>
<a name="1">1</a>. As of 2006-12-23 I am only able 
<a href="http://www.google.com/search?q=perl+filetype:par">to</a>
<a href="http://www.google.com/search?q=module+filetype:par">find</a> two
PARchives online;
<a href="http://cpan.org/authors/id/R/RS/RSOD/XML-Parser-2.34-darwin-thread-multi-2level-5.8.1.par"><tt>XML::Parser</tt> for Darwin</a>.
and 
<a href="http://library.pantek.com/Programming/Perl/CPAN/modules/by-module/DNS/BINGOS/POE-Component-IRC-5.08-MSWin32-x86-multi-thread-5.8.8.par"><tt>POE::Component::IRC</tt> for Windows.</a>

</body>
</html>
